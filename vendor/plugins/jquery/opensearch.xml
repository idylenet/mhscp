

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>giraffesoft's attribute_fu at jquery &mdash; GitHub</title>
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub" />
    <link rel="fluid-icon" href="http://github.com/fluidicon.png" title="GitHub" />

    
      <link href="/stylesheets/bundle.css?db89746ce3bb80c81851b6bb7a1ee5757784a09d" media="screen" rel="stylesheet" type="text/css" />
    

    
      
        <script src="/javascripts/bundle.js?db89746ce3bb80c81851b6bb7a1ee5757784a09d" type="text/javascript"></script>
      
    
    
  
    
  

  <link href="http://github.com/feeds/giraffesoft/commits/attribute_fu/jquery" rel="alternate" title="Recent Commits to attribute_fu:jquery" type="application/atom+xml" />


    
  </head>

  

  <body>
    

    <div id="main">
      <div id="header" class="">
        <div class="site">
          <div class="logo">
            <a href="/"><img src="/images/modules/header/logo.png" alt="git-hub" /></a>
          </div>
          
            <div class="corner userbox">
  <div class="box">
    <div class="gravatar">
      <a href="/"><img alt="" height="40" src="http://www.gravatar.com/avatar/70b8194649620ce7bf0025464e8d4b50?s=40&amp;d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-40.png" width="40" /></a>
    </div>

    <div class="top">
      <div class="name">
        <a href="/">idylenet</a>
      </div>
      <div class="links">
        <a href="/account">account</a> |
        <a href="/idylenet">profile</a> |
        <a href="/guides">guides</a> |
        <a href="/logout">log out</a>
      </div>
    </div>

    <div class="bottom">
      <div class="select">
        <div class="site_links">
          repositories: 
          <a href="/repositories">all</a> |
          <a href="/search" class="search_repos_link">search</a>
        </div>

        <form action="/search" class="search_repos" method="get" style="display:none;">
          <input id="q" name="q" size="18" type="search" /> 
          <input type="submit" value="Search" />
          <a href="#" class="cancel_search_link">x</a>
        </form>
      </div>
      
      <div class="inbox"> <span><a href="/inbox">0</a></span> </div>
    </div>
  </div>
</div>

          
        </div>
      </div>
      
      
        
  <div id="repo_menu">
    <div class="site">
      <ul>
        
          <li class="active"><a href="/giraffesoft/attribute_fu/tree/jquery">Source</a></li>

          <li class=""><a href="/giraffesoft/attribute_fu/commits/jquery">Commits</a></li>

          <li class=""><a href="/giraffesoft/attribute_fu/graphs">Graphs</a></li>

          <li class=""><a href="/giraffesoft/attribute_fu/wikis">Wiki (1)</a></li>

          <li class=""><a href="/giraffesoft/attribute_fu/watchers">Watchers (85)</a></li>

          <li class=""><a href="/giraffesoft/attribute_fu/network">Network (14)</a></li>

          

        
      </ul>
    </div>
  </div>

  <div id="repo_sub_menu">
    <div class="site">
      <div class="joiner"></div>
      

      

      
        <ul>
          <li>
            <a class="active" href="/giraffesoft/attribute_fu/tree/c83f28d6489ef3f24017c4dee113db5f9c702407">jquery</a>
          </li>
          <li>
            <a href="#">all branches</a>
            <ul>
              
                <li><a href="/giraffesoft/attribute_fu/tree/jquery">jquery</a></li>
              
                <li><a href="/giraffesoft/attribute_fu/tree/master">master</a></li>
              
            </ul>
          </li>
          <li>
            <a href="#">all tags</a>
            
          </li>
        </ul>

      
    </div>
  </div>

  <div class="site">
    



<div id="repos">
  


<div class="repo public">
  <div class="title">
    <div class="path">
      <a href="/giraffesoft">giraffesoft</a> / <b><a href="/giraffesoft/attribute_fu/tree">attribute_fu</a></b>

      

        

        
          

          
            
            <a href="/giraffesoft/attribute_fu/fork"><img alt="fork" class="button" src="/images/modules/repos/fork_button.png?db89746ce3bb80c81851b6bb7a1ee5757784a09d" /></a> 
          
        

        <a href="/giraffesoft/attribute_fu/toggle_watch" class="toggle_watch"><img alt="watch" class="button" src="/images/modules/repos/watch_button.png?db89746ce3bb80c81851b6bb7a1ee5757784a09d" /></a><a href="/giraffesoft/attribute_fu/toggle_watch" class="toggle_watch" style="display:none;"><img alt="watch" class="button" src="/images/modules/repos/unwatch_button.png?db89746ce3bb80c81851b6bb7a1ee5757784a09d" /></a>

        
          <a href="#" id="download_button" rel="/giraffesoft/attribute_fu/downloads/jquery"><img alt="download tarball" class="button" src="/images/modules/repos/download_button.png?db89746ce3bb80c81851b6bb7a1ee5757784a09d" /></a> 
        
      
    </div>

    <div class="security private_security" style="display:none">
      <a href="#private_repo" rel="facebox"><img src="/images/icons/private.png" alt="private" /></a>
    </div>

    <div id="private_repo" class="hidden">
      This repository is private.  
      All pages are served over SSL and all pushing and pulling is done over SSH.
      No one may fork, clone, or view it unless they are added as a <a href="/giraffesoft/attribute_fu/edit/collaborators">member</a>.

      <br/>
      <br/>
      Every repository with this icon (<img src="/images/icons/private.png" alt="private" />) is private.
    </div>

    <div class="security public_security" style="">
      <a href="#public_repo" rel="facebox"><img src="/images/icons/public.png" alt="public" /></a>
    </div>

    <div id="public_repo" class="hidden">
      This repository is public.
      Anyone may fork, clone, or view it.

      <br/>
      <br/>
      Every repository with this icon (<img src="/images/icons/public.png" alt="public" />) is public.
    </div>

    
      <div class="security" style="margin-right:0.5em;">
        <a href="#rubygem_install" rel="facebox"><img alt="Rubygem" src="/images/icons/rubygem.png?db89746ce3bb80c81851b6bb7a1ee5757784a09d" /></a>
      </div>

      <div id="rubygem_install" class="hidden">
        
          <p>Run the following if you haven't already:</p>
          <pre>gem sources -a http://gems.github.com</pre>
          <p>Install the gem(s):</p>
          
            <pre>sudo gem install giraffesoft-attribute_fu</pre>
          
        
      </div>
    
  </div>
  <div class="meta">
    <table>
      
      
        <tr>
          <td class="label">Description:</td>
          <td>
            <span id="repository_description" rel="/giraffesoft/attribute_fu/edit/update" class="">rails multi-model forms made easy!</span> 
            
          </td>
        </tr>
      

      
        
          <tr>
            <td class="label">Homepage:</td>
            <td>
              
                
                <a href="http://jamesgolick.com/attribute_fu">http://jamesgolick.com/attribute_fu</a> 
              
            </td>
          </tr>
        
        
          <tr>
            <td class="label">Public&nbsp;Clone&nbsp;URL:</td>
            
            <td>
              <a href="git://github.com/giraffesoft/attribute_fu.git" class="git_url_facebox" rel="#git-clone">git://github.com/giraffesoft/attribute_fu.git</a>
              <div id="git-clone" style="display:none;">
                Give this clone URL to anyone.
                <br/>
                <code>git clone git://github.com/giraffesoft/attribute_fu.git </code>
              </div>
            </td>
          </tr>
        
        
        

        

        
    </table>
    
      </div>
</div>

</div>

<div id="commit">
  <div class="group">
    <div class="envelope commit">
  <div class="human">
    
      <div class="message"><pre><a href="/giraffesoft/attribute_fu/commit/c83f28d6489ef3f24017c4dee113db5f9c702407">cherry pick commit to deal with quoting bug</a> </pre></div>
    

    <div class="actor">
      <div class="gravatar">
        
        <img alt="" height="30" src="http://www.gravatar.com/avatar/aefacc79816f2a05349cb22868d16ce3?s=30&amp;d=http%3A%2F%2Fgithub.com%2Fimages%2Fgravatars%2Fgravatar-30.png" width="30" />
      </div>
      <div class="name"><a href="/giraffesoft">giraffesoft</a> <span>(author)</span></div>
        <div class="date">
          <abbr class="relatize" title="2008-07-22 09:43:15">Tue Jul 22 09:43:15 -0700 2008</abbr> 
        </div>
    </div>

    

  </div>
  <div class="machine">
    <span>c</span>ommit&nbsp;&nbsp;<a href="/giraffesoft/attribute_fu/commit/c83f28d6489ef3f24017c4dee113db5f9c702407" hotkey="c">c83f28d6489ef3f24017c4dee113db5f9c702407</a><br />
    <span>t</span>ree&nbsp;&nbsp;&nbsp;&nbsp;<a href="/giraffesoft/attribute_fu/tree/c83f28d6489ef3f24017c4dee113db5f9c702407" hotkey="t">fc0443560bef40a0cf036b4e9c1ce336c8b4862c</a><br />

    
      <span>p</span>arent&nbsp;
      
      <a href="/giraffesoft/attribute_fu/tree/fa108ef74aabc9d4b644ff96fe88d60ea2b49415" hotkey="p">fa108ef74aabc9d4b644ff96fe88d60ea2b49415</a>
    

  </div>
</div>

  </div>
</div>





  




  
    <div id="path">
      <b><a href="/giraffesoft/attribute_fu/tree">attribute_fu</a></b> / 
    </div>

    
      


<div id="browser"> 
  <table cellpadding="0" cellspacing="0">
    <tr>
      <th></th>
      <th>name</th>
      <th>age</th>
      <th>
        <div class="history">
          <a href="/giraffesoft/attribute_fu/commits/jquery/">history</a>
        </div>
        message
      </th>
    </tr>

    

    
      <tr class="alt">
        <td class="icon"> <img alt="file" src="/images/icons/txt.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/.gitignore">.gitignore</a> </td>
        <td> <span class="relatize">Sat Feb 16 11:39:03 -0800 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/e396b41f73188bb96cd94b7ece3ce5af0cca4ecf" class="message">add git ignore file</a> [james] </td>
      </tr>
    
      <tr class="">
        <td class="icon"> <img alt="file" src="/images/icons/txt.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/MIT-LICENSE">MIT-LICENSE</a> </td>
        <td> <span class="relatize">Sat Feb 16 11:38:48 -0800 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/45ee58760a7927b731cf6a08e4870e4832ba80ea" class="message">update copyright notice to 2008</a> [james] </td>
      </tr>
    
      <tr class="alt">
        <td class="icon"> <img alt="file" src="/images/icons/txt.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/README">README</a> </td>
        <td> <span class="relatize">Sat Feb 16 13:19:26 -0800 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/d8d719e7ecb1b0c93df35a96c125c1ddd73bfebd" class="message">update README to reflect discard_if change</a> [james] </td>
      </tr>
    
      <tr class="">
        <td class="icon"> <img alt="file" src="/images/icons/txt.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/Rakefile">Rakefile</a> </td>
        <td> <span class="relatize">Wed Nov 21 06:21:26 -0800 2007</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/0b687a46b5357139b0c9fcb8b332daedf9296c4b" class="message">import plugin layout</a> [james] </td>
      </tr>
    
      <tr class="alt">
        <td class="icon"> <img alt="file" src="/images/icons/txt.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/init.rb">init.rb</a> </td>
        <td> <span class="relatize">Sun Apr 20 17:14:48 -0700 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/a105310c979547a0fb614ce3d082eec971b78ec1" class="message">Automatically copy the required javascript file...</a> [<a href="/schof">schof</a>] </td>
      </tr>
    
      <tr class="">
        <td class="icon"> <img alt="directory" src="/images/icons/dir.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/javascripts">javascripts/</a> </td>
        <td> <span class="relatize">Wed Apr 02 17:35:21 -0700 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/4c7790dd4ba601d331975e223cc2728796d4a7ba" class="message">add the javascript for JQuery templates</a> [<a href="/giraffesoft">giraffesoft</a>] </td>
      </tr>
    
      <tr class="alt">
        <td class="icon"> <img alt="directory" src="/images/icons/dir.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/lib">lib/</a> </td>
        <td> <span class="relatize">Tue Jul 22 09:43:15 -0700 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/c83f28d6489ef3f24017c4dee113db5f9c702407" class="message">cherry pick commit to deal with quoting bug</a> [<a href="/giraffesoft">giraffesoft</a>] </td>
      </tr>
    
      <tr class="">
        <td class="icon"> <img alt="directory" src="/images/icons/dir.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/tasks">tasks/</a> </td>
        <td> <span class="relatize">Wed Nov 21 06:21:26 -0800 2007</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/0b687a46b5357139b0c9fcb8b332daedf9296c4b" class="message">import plugin layout</a> [james] </td>
      </tr>
    
      <tr class="alt">
        <td class="icon"> <img alt="directory" src="/images/icons/dir.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/test">test/</a> </td>
        <td> <span class="relatize">Tue Jul 22 09:43:15 -0700 2008</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/c83f28d6489ef3f24017c4dee113db5f9c702407" class="message">cherry pick commit to deal with quoting bug</a> [<a href="/giraffesoft">giraffesoft</a>] </td>
      </tr>
    
      <tr class="">
        <td class="icon"> <img alt="file" src="/images/icons/txt.png?aecaadaceb01a414d0d7854d8628ed8ed6b4ab8f" /> </td>
        <td> <a href="/giraffesoft/attribute_fu/tree/jquery/uninstall.rb">uninstall.rb</a> </td>
        <td> <span class="relatize">Wed Nov 21 06:21:26 -0800 2007</span> </td>
        <td> <a href="/giraffesoft/attribute_fu/commit/0b687a46b5357139b0c9fcb8b332daedf9296c4b" class="message">import plugin layout</a> [james] </td>
      </tr>
    
  </table>
</div>

<div id="readme" class="announce"><span class="name">README</span><div class="plain"><pre>= AttributeFu


Creating multi-model forms is amazingly easy with AttributeFu.

= Get It!

  $ piston import <a href="http://svn.jamesgolick.com/attribute_fu/tags/stable">http://svn.jamesgolick.com/attribute_fu/tags/stable</a> vendor/plugins/attribute_fu

= Conventions

attribute_fu requires the fewest keystrokes if you follow certain conventions.

* The partial that contains your associated model's form is expected to be called _class_name.template_ext
  (e.g. the partial for your Task model would be called _task.html.erb)
* The DOM element that contains the form for your model should have the CSS class .class_name
  (e.g. the CSS class for your Task would be .task)
* The DOM element that contains all of the rendered forms should have the DOM ID #class_name
  (e.g. the DOM ID of the container of your Task forms would be #tasks)
  &lt;i&gt;Note: This is only relevant if using the add_associated_link method.&lt;/i&gt;

= Example

In this example, you'll build a form for a Project model, in which a list of associated (has_many) tasks can be edited. 


The first thing you need to do is enable attributes on the association.
  
  class Project &lt; ActiveRecord::Base
    has_many :tasks, :attributes =&gt; true
  end

Instances of Project will now respond to task_attributes, whose format is as follows:
  
  @project.task_attributes = {
    @project.tasks.first.id =&gt; {:title =&gt; &quot;A new title for an existing task&quot;},
    :new =&gt; {
      &quot;0&quot; =&gt; {:title =&gt; &quot;A new task&quot;}
    }
  }
  
Any tasks that already exist in that collection, and are not included in the hash, as supplied to task_attributes, will 
be removed from the association when saved. Most of the time, the form helpers should take care of building that hash 
for you, though.

== Form Helpers

If you follow certain conventions, rendering your associated model's form elements is incredibly simple. The partial 
should have the name of the associated element's type, and look like a regular old form partial (no messy fields_for 
calls, or any nonsense like that).
  
  ## _task.html.erb
  &lt;div class=&quot;task&quot;&gt;
    &lt;label&gt;Title&lt;/label&gt;
    &lt;%= f.text_field :title %&gt;
  &lt;/div&gt;

Then, in your parent element's form, call the render_associated_form method on the form builder, with the collection of 
elements you'd like to render as the only argument.

  ## _form.html.erb
  &lt;%= f.render_associated_form(@project.tasks) %&gt;
  
That call will render the partial named _task.html.erb with each element in the supplied collection of tasks, wrapping 
the partial in a form builder (fields_for) with all the necessary arguments to produce a hash that will satisfy the 
task_attributes method.

You may want to add a few blank tasks to the bottom of your form; no need to do that in the controller anymore.

  &lt;%= f.render_associated_form(@project.tasks, :new =&gt; 3) %&gt;
  
Since this is Web2.0, no form would be complete without some DHTML add and remove buttons. Fortunately, there are some 
nifty helpers to create them for us. Simply calling remove_link on the form builder in your _task partial will do the 
trick.

  ## _task.html.erb
  &lt;div class=&quot;task&quot;&gt;
    &lt;label&gt;Title&lt;/label&gt;
    &lt;%= f.text_field :title %&gt;
    &lt;%= f.remove_link &quot;remove&quot; %&gt;
  &lt;/div&gt;
  
Creating the add button is equally simple. The add_associated_link helper will do all of the heavy lifting for you.

  ## _form.html.erb
  &lt;%= f.add_associated_link &quot;Add New Task&quot;, @project.tasks.build %&gt;
  
That's all you have to do to create a multi-model form with attribute_fu!

== Discarding Blank Child Models

If you want to show a bunch of blank child model forms at the bottom of your form, but you only want to save the ones 
that are filled out, you can use the discard_if option. It accepts either a proc:

  class Project &lt; ActiveRecord::Base
    has_many :tasks, :attributes =&gt; true, :discard_if =&gt; proc { |task| task.title.blank? }
  end

...or a symbol...

  class Project &lt; ActiveRecord::Base
    has_many :tasks, :attributes =&gt; true, :discard_if =&gt; :blank?
  end
  
  class Task &lt; ActiveRecord::Base
    def blank?
      title.blank?
    end
  end

Using a symbol allows you to keep code DRYer if you are using that routine in more than one place. Both of those 
examples, however, would have the same effect.

= Updates

Come join the discussion on the {mailing list}[link:http://groups.google.com/group/attribute_fu]

Updates will be available {here}[<a href="http://jamesgolick.com/attribute_fu">http://jamesgolick.com/attribute_fu</a>]


== Credits

attribute_fu was created, and is maintained by {James Golick}[<a href="http://jamesgolick.com">http://jamesgolick.com</a>].



Copyright (c) 2007 James Golick, GiraffeSoft Inc., released under the MIT license
</pre></div></div>

    
  


  </div>

      
      
      <div class="push"></div>
    </div>
    
    <div id="footer">
      <div class="site">
        <div class="info">
          <div class="links">
            <a href="http://github.com/blog/148-github-shirts-now-available">T-Shirts</a> |            
            <a href="/blog">Blog</a> |             
            <a href="http://groups.google.com/group/github/">Google Group</a> | 
            <a href="http://logicalawesome.lighthouseapp.com/projects/8570/home">Bugs &amp; Features</a> |
            <a href="/training">Git Training</a> | 
            <a href="mailto:support@github.com">Contact</a> |
            <a href="http://github.wordpress.com">Status</a> 
          </div>
          <div class="company">
            <span id="_rrt" title="1.42503s from github.com">GitHub</span>
            is <a href="http://logicalawesome.com/">Logical Awesome</a> | &copy;2008 | <a href="/site/terms">Terms of Service</a> | <a href="/site/privacy">Privacy Policy</a>
          </div>
        </div>
        <div class="sponsor">
          <a href="http://engineyard.com">Hosting provided by</a>&nbsp;
          <a href="http://engineyard.com">
            <img src="/images/modules/footer/engine_yard_logo.gif" alt="Hosted by Engine Yard" />
          </a>
        </div>
      </div>
    </div>
    
    <div id="coming_soon" style="display:none;">
      This feature is coming soon.  Sit tight!
    </div>
        <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-3769691-2");
    pageTracker._initData();
    pageTracker._trackPageview();
    </script>

  </body>
</html>

